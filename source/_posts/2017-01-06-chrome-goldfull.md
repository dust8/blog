---
title: 一个免登录展开稀土掘金文章全文的chrome插件
date: 2017-01-06 05:15:31
tags:
  - 插件
  - chrome
---

## 起因  
在资讯爆炸的时代,如何挑选有用的资讯就比较困难,所以有了不少筛选信息的网站.    
在专注于编程方面的, 又比较活跃和大一些的就有 稀土掘金, 开发者头条 和 推酷.    
前2者比较新比较活跃, 后者比较老.   
这里要抱怨下常用的套路, 从免登录+无广告,用户多一点就要登录,到登录后要验证个人信息+加入广告.
我个人非常不喜欢这种要强制要登录的.我只是单纯的想看一下文章而已, 完全没必要去登录.
稀土掘金现在有些文章就需要登录才能展开全文, 所以就要想想办法,    
开发了 [gold full](https://github.com/dust8/goldfull) 插件.

## 原理
按照经验来说,一般全文都已经请求到客户端了,只是被隐藏了而已. 这样可以省去重复请求, 节约服务器资源.
先看网页源代码,完全没有数据.在审查元素, 可以看到全文都在里面,只是没有显示出来.    

分析它的 `展开全文` 按钮的 `js` 代码,发现自己太菜,看不懂.只好查看内容的 `css` 类名,
终于有所发现. 有个 `hidden` 类, 有 `overflow: hidden;position: relative;` 属性,
把 `overflow` 属性去掉之后就可以看到全文. 不过有个问题会出现和下面的元素内容重叠.
可以想到是高度问题,发现有个 `max-height`,把它去掉就完全没有问题了.


## 开发插件
每次都去改属性比较麻烦,可以做成插件,来自动完成.
[Chrome扩展及应用开发](http://www.ituring.com.cn/book/1421)
[What are extensions](https://developer.chrome.com/extensions)
有这本书和官方文档就可以开发插件了.
`goldfull` 代码很简单,改了 `max-height` 为 `none`, 移除了 `展开全文` 按钮.

## 总结
今天总算没有浪费在游戏上面,然后就是把知识用起来的感觉真好.
